{"remainingRequest":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\babel-loader\\lib\\index.js!D:\\bk\\aurora-blog-admin-qd\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\bk\\aurora-blog-admin-qd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\bk\\aurora-blog-admin-qd\\src\\views\\tags\\TagList.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\bk\\aurora-blog-admin-qd\\src\\views\\tags\\TagList.vue","mtime":1743693852771},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743694599572},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\babel-loader\\lib\\index.js","mtime":1743694587149},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743694599572},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\vue-loader\\lib\\index.js","mtime":1743694587864}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RhZ0xpc3QnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjcmVhdGVEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgdGFnRm9ybTogewogICAgICAgIHRhZzogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICB0YWc6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmoIfnrb7lkI3np7AnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAxLAogICAgICAgICAgbWF4OiAzMCwKICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKggMSDliLAgMzAg5Liq5a2X56ymJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ3RhZ3MnLCAnaXNMb2FkaW5nJ10pCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaFRhZ3MoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydmZXRjaFRhZ3MnLCAnY3JlYXRlVGFnJywgJ2RlbGV0ZVRhZyddKSwKICAgIC8vIOaYvuekuuWIm+W7uuWvueivneahhgogICAgc2hvd0NyZWF0ZURpYWxvZygpIHsKICAgICAgdGhpcy50YWdGb3JtLnRhZyA9ICcnOwogICAgICB0aGlzLmNyZWF0ZURpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy50YWdGb3JtLmNsZWFyVmFsaWRhdGUoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yib5bu65qCH562+CiAgICBjcmVhdGVUYWcoKSB7CiAgICAgIHRoaXMuJHJlZnMudGFnRm9ybS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVRhZyh7CiAgICAgICAgICAgICAgdGFnOiB0aGlzLnRhZ0Zvcm0udGFnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+agh+etvuWIm+W7uuaIkOWKn++8gScKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5qCH562+5Yib5bu65aSx6LSlJyk7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+agh+etvuWIm+W7uuWksei0pTonLCBlcnJvcik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOehruiupOWIoOmZpOagh+etvgogICAgY29uZmlybURlbGV0ZSh0YWcpIHsKICAgICAgaWYgKHRhZy5jb3VudCA+IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoYOivpeagh+etvui/mOWcqOS9v+eUqOS4re+8jOS4jeiDveWIoOmZpGApOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRjb25maXJtKGDnoa7lrpropoHliKDpmaTmoIfnrb4gIiR7dGFnLm5hbWV9IiDlkJfvvJ9gLCAn5Yig6Zmk56Gu6K6kJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6a5Yig6ZmkJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5oYW5kbGVEZWxldGUodGFnLm5hbWUpOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmiafooYzliKDpmaQKICAgIGFzeW5jIGhhbmRsZURlbGV0ZSh0YWdOYW1lKSB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVUYWcodGFnTmFtZSk7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5qCH562+5Yig6Zmk5oiQ5Yqf77yBJwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+agh+etvuWIoOmZpOWksei0pScpOwogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+agh+etvuWIoOmZpOWksei0pTonLCBlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnrZvpgInkvb/nlKjor6XmoIfnrb7nmoTmlofnq6AKICAgIGZpbHRlclBvc3RzQnlUYWcodGFnTmFtZSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9wb3N0cycsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHRhZzogdGFnTmFtZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapGetters","mapActions","name","data","createDialogVisible","tagForm","tag","rules","required","message","trigger","min","max","computed","created","fetchTags","methods","showCreateDialog","$nextTick","$refs","clearValidate","createTag","validate","valid","$message","type","error","console","confirmDelete","count","warning","$confirm","confirmButtonText","cancelButtonText","then","handleDelete","catch","tagName","deleteTag","filterPostsByTag","$router","push","path","query"],"sources":["src/views/tags/TagList.vue"],"sourcesContent":["<template>\r\n  <div class=\"tag-list-container\">\r\n    <div class=\"page-header\">\r\n      <h2>标签管理</h2>\r\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"showCreateDialog\">\r\n        新建标签\r\n      </el-button>\r\n    </div>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"hover\" class=\"tag-card\">\r\n          <el-table\r\n            :data=\"tags\"\r\n            style=\"width: 100%\"\r\n            v-loading=\"isLoading\"\r\n            border\r\n            stripe\r\n          >\r\n            <el-table-column prop=\"name\" label=\"标签名称\" width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                <el-tag>{{ scope.row.name }}</el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"count\" label=\"使用次数\" width=\"120\" sortable>\r\n              <template slot-scope=\"scope\">\r\n                <span>{{ scope.row.count || 0 }}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"150\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  icon=\"el-icon-delete\"\r\n                  @click=\"confirmDelete(scope.row)\"\r\n                  :disabled=\"scope.row.count > 0\"\r\n                  title=\"删除\"\r\n                ></el-button>\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"primary\"\r\n                  icon=\"el-icon-search\"\r\n                  @click=\"filterPostsByTag(scope.row.name)\"\r\n                  title=\"查看关联文章\"\r\n                ></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <!-- 空状态 -->\r\n          <div v-if=\"tags.length === 0 && !isLoading\" class=\"empty-state\">\r\n            <i class=\"el-icon-collection-tag\"></i>\r\n            <p>暂无标签</p>\r\n            <el-button type=\"primary\" @click=\"showCreateDialog\">\r\n              新建标签\r\n            </el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 新建标签对话框 -->\r\n    <el-dialog title=\"新建标签\" :visible.sync=\"createDialogVisible\" width=\"30%\">\r\n      <el-form :model=\"tagForm\" :rules=\"rules\" ref=\"tagForm\" label-width=\"80px\">\r\n        <el-form-item label=\"标签名称\" prop=\"tag\">\r\n          <el-input v-model=\"tagForm.tag\" placeholder=\"请输入标签名称\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"createDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"createTag\" :loading=\"isLoading\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: 'TagList',\r\n  data() {\r\n    return {\r\n      createDialogVisible: false,\r\n      tagForm: {\r\n        tag: ''\r\n      },\r\n      rules: {\r\n        tag: [\r\n          { required: true, message: '请输入标签名称', trigger: 'blur' },\r\n          { min: 1, max: 30, message: '长度在 1 到 30 个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['tags', 'isLoading'])\r\n  },\r\n  created() {\r\n    this.fetchTags()\r\n  },\r\n  methods: {\r\n    ...mapActions(['fetchTags', 'createTag', 'deleteTag']),\r\n    // 显示创建对话框\r\n    showCreateDialog() {\r\n      this.tagForm.tag = ''\r\n      this.createDialogVisible = true\r\n      this.$nextTick(() => {\r\n        this.$refs.tagForm.clearValidate()\r\n      })\r\n    },\r\n    // 创建标签\r\n    createTag() {\r\n      this.$refs.tagForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            await this.createTag({ tag: this.tagForm.tag })\r\n            \r\n            this.$message({\r\n              type: 'success',\r\n              message: '标签创建成功！'\r\n            })\r\n            \r\n            this.createDialogVisible = false\r\n          } catch (error) {\r\n            this.$message.error('标签创建失败')\r\n            console.error('标签创建失败:', error)\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 确认删除标签\r\n    confirmDelete(tag) {\r\n      if (tag.count > 0) {\r\n        this.$message.warning(`该标签还在使用中，不能删除`)\r\n        return\r\n      }\r\n      \r\n      this.$confirm(`确定要删除标签 \"${tag.name}\" 吗？`, '删除确认', {\r\n        confirmButtonText: '确定删除',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.handleDelete(tag.name)\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        })\r\n      })\r\n    },\r\n    // 执行删除\r\n    async handleDelete(tagName) {\r\n      try {\r\n        await this.deleteTag(tagName)\r\n        this.$message({\r\n          type: 'success',\r\n          message: '标签删除成功！'\r\n        })\r\n      } catch (error) {\r\n        this.$message.error('标签删除失败')\r\n        console.error('标签删除失败:', error)\r\n      }\r\n    },\r\n    // 筛选使用该标签的文章\r\n    filterPostsByTag(tagName) {\r\n      this.$router.push({\r\n        path: '/posts',\r\n        query: { tag: tagName }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.tag-list-container {\r\n  padding-bottom: 20px;\r\n}\r\n\r\n.tag-card {\r\n  min-height: 300px;\r\n}\r\n\r\n.empty-state {\r\n  padding: 40px 0;\r\n  text-align: center;\r\n}\r\n\r\n.empty-state i {\r\n  font-size: 48px;\r\n  color: #909399;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.empty-state p {\r\n  color: #606266;\r\n  margin-bottom: 20px;\r\n}\r\n</style> "],"mappings":"AA8EA,SAAAA,UAAA,EAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,mBAAA;MACAC,OAAA;QACAC,GAAA;MACA;MACAC,KAAA;QACAD,GAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAG,QAAA;IACA,GAAAb,UAAA;EACA;EACAc,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACA,GAAAf,UAAA;IACA;IACAgB,iBAAA;MACA,KAAAZ,OAAA,CAAAC,GAAA;MACA,KAAAF,mBAAA;MACA,KAAAc,SAAA;QACA,KAAAC,KAAA,CAAAd,OAAA,CAAAe,aAAA;MACA;IACA;IACA;IACAC,UAAA;MACA,KAAAF,KAAA,CAAAd,OAAA,CAAAiB,QAAA,OAAAC,KAAA;QACA,IAAAA,KAAA;UACA;YACA,WAAAF,SAAA;cAAAf,GAAA,OAAAD,OAAA,CAAAC;YAAA;YAEA,KAAAkB,QAAA;cACAC,IAAA;cACAhB,OAAA;YACA;YAEA,KAAAL,mBAAA;UACA,SAAAsB,KAAA;YACA,KAAAF,QAAA,CAAAE,KAAA;YACAC,OAAA,CAAAD,KAAA,YAAAA,KAAA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAE,cAAAtB,GAAA;MACA,IAAAA,GAAA,CAAAuB,KAAA;QACA,KAAAL,QAAA,CAAAM,OAAA;QACA;MACA;MAEA,KAAAC,QAAA,aAAAzB,GAAA,CAAAJ,IAAA;QACA8B,iBAAA;QACAC,gBAAA;QACAR,IAAA;MACA,GAAAS,IAAA;QACA,KAAAC,YAAA,CAAA7B,GAAA,CAAAJ,IAAA;MACA,GAAAkC,KAAA;QACA,KAAAZ,QAAA;UACAC,IAAA;UACAhB,OAAA;QACA;MACA;IACA;IACA;IACA,MAAA0B,aAAAE,OAAA;MACA;QACA,WAAAC,SAAA,CAAAD,OAAA;QACA,KAAAb,QAAA;UACAC,IAAA;UACAhB,OAAA;QACA;MACA,SAAAiB,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA;QACAC,OAAA,CAAAD,KAAA,YAAAA,KAAA;MACA;IACA;IACA;IACAa,iBAAAF,OAAA;MACA,KAAAG,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAC,KAAA;UAAArC,GAAA,EAAA+B;QAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}