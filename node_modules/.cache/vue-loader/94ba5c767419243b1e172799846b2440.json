{"remainingRequest":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\bk\\aurora-blog-admin-qd\\src\\views\\tags\\TagList.vue?vue&type=style&index=0&id=1379a35c&scoped=true&lang=css","dependencies":[{"path":"D:\\bk\\aurora-blog-admin-qd\\src\\views\\tags\\TagList.vue","mtime":1743693852771},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\css-loader\\dist\\cjs.js","mtime":1743694597384},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1743694588723},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\postcss-loader\\src\\index.js","mtime":1743694597267},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743694599572},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\vue-loader\\lib\\index.js","mtime":1743694587864}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoudGFnLWxpc3QtY29udGFpbmVyIHsNCiAgcGFkZGluZy1ib3R0b206IDIwcHg7DQp9DQoNCi50YWctY2FyZCB7DQogIG1pbi1oZWlnaHQ6IDMwMHB4Ow0KfQ0KDQouZW1wdHktc3RhdGUgew0KICBwYWRkaW5nOiA0MHB4IDA7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCg0KLmVtcHR5LXN0YXRlIGkgew0KICBmb250LXNpemU6IDQ4cHg7DQogIGNvbG9yOiAjOTA5Mzk5Ow0KICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KfQ0KDQouZW1wdHktc3RhdGUgcCB7DQogIGNvbG9yOiAjNjA2MjY2Ow0KICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KfQ0K"},{"version":3,"sources":["TagList.vue"],"names":[],"mappings":";AAmLA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"TagList.vue","sourceRoot":"src/views/tags","sourcesContent":["<template>\r\n  <div class=\"tag-list-container\">\r\n    <div class=\"page-header\">\r\n      <h2>标签管理</h2>\r\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"showCreateDialog\">\r\n        新建标签\r\n      </el-button>\r\n    </div>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"hover\" class=\"tag-card\">\r\n          <el-table\r\n            :data=\"tags\"\r\n            style=\"width: 100%\"\r\n            v-loading=\"isLoading\"\r\n            border\r\n            stripe\r\n          >\r\n            <el-table-column prop=\"name\" label=\"标签名称\" width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                <el-tag>{{ scope.row.name }}</el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"count\" label=\"使用次数\" width=\"120\" sortable>\r\n              <template slot-scope=\"scope\">\r\n                <span>{{ scope.row.count || 0 }}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"150\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  icon=\"el-icon-delete\"\r\n                  @click=\"confirmDelete(scope.row)\"\r\n                  :disabled=\"scope.row.count > 0\"\r\n                  title=\"删除\"\r\n                ></el-button>\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"primary\"\r\n                  icon=\"el-icon-search\"\r\n                  @click=\"filterPostsByTag(scope.row.name)\"\r\n                  title=\"查看关联文章\"\r\n                ></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <!-- 空状态 -->\r\n          <div v-if=\"tags.length === 0 && !isLoading\" class=\"empty-state\">\r\n            <i class=\"el-icon-collection-tag\"></i>\r\n            <p>暂无标签</p>\r\n            <el-button type=\"primary\" @click=\"showCreateDialog\">\r\n              新建标签\r\n            </el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 新建标签对话框 -->\r\n    <el-dialog title=\"新建标签\" :visible.sync=\"createDialogVisible\" width=\"30%\">\r\n      <el-form :model=\"tagForm\" :rules=\"rules\" ref=\"tagForm\" label-width=\"80px\">\r\n        <el-form-item label=\"标签名称\" prop=\"tag\">\r\n          <el-input v-model=\"tagForm.tag\" placeholder=\"请输入标签名称\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"createDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"createTag\" :loading=\"isLoading\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: 'TagList',\r\n  data() {\r\n    return {\r\n      createDialogVisible: false,\r\n      tagForm: {\r\n        tag: ''\r\n      },\r\n      rules: {\r\n        tag: [\r\n          { required: true, message: '请输入标签名称', trigger: 'blur' },\r\n          { min: 1, max: 30, message: '长度在 1 到 30 个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['tags', 'isLoading'])\r\n  },\r\n  created() {\r\n    this.fetchTags()\r\n  },\r\n  methods: {\r\n    ...mapActions(['fetchTags', 'createTag', 'deleteTag']),\r\n    // 显示创建对话框\r\n    showCreateDialog() {\r\n      this.tagForm.tag = ''\r\n      this.createDialogVisible = true\r\n      this.$nextTick(() => {\r\n        this.$refs.tagForm.clearValidate()\r\n      })\r\n    },\r\n    // 创建标签\r\n    createTag() {\r\n      this.$refs.tagForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            await this.createTag({ tag: this.tagForm.tag })\r\n            \r\n            this.$message({\r\n              type: 'success',\r\n              message: '标签创建成功！'\r\n            })\r\n            \r\n            this.createDialogVisible = false\r\n          } catch (error) {\r\n            this.$message.error('标签创建失败')\r\n            console.error('标签创建失败:', error)\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 确认删除标签\r\n    confirmDelete(tag) {\r\n      if (tag.count > 0) {\r\n        this.$message.warning(`该标签还在使用中，不能删除`)\r\n        return\r\n      }\r\n      \r\n      this.$confirm(`确定要删除标签 \"${tag.name}\" 吗？`, '删除确认', {\r\n        confirmButtonText: '确定删除',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.handleDelete(tag.name)\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        })\r\n      })\r\n    },\r\n    // 执行删除\r\n    async handleDelete(tagName) {\r\n      try {\r\n        await this.deleteTag(tagName)\r\n        this.$message({\r\n          type: 'success',\r\n          message: '标签删除成功！'\r\n        })\r\n      } catch (error) {\r\n        this.$message.error('标签删除失败')\r\n        console.error('标签删除失败:', error)\r\n      }\r\n    },\r\n    // 筛选使用该标签的文章\r\n    filterPostsByTag(tagName) {\r\n      this.$router.push({\r\n        path: '/posts',\r\n        query: { tag: tagName }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.tag-list-container {\r\n  padding-bottom: 20px;\r\n}\r\n\r\n.tag-card {\r\n  min-height: 300px;\r\n}\r\n\r\n.empty-state {\r\n  padding: 40px 0;\r\n  text-align: center;\r\n}\r\n\r\n.empty-state i {\r\n  font-size: 48px;\r\n  color: #909399;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.empty-state p {\r\n  color: #606266;\r\n  margin-bottom: 20px;\r\n}\r\n</style> "]}]}