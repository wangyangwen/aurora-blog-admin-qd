{"remainingRequest":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\bk\\aurora-blog-admin-qd\\src\\views\\tags\\TagList.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\bk\\aurora-blog-admin-qd\\src\\views\\tags\\TagList.vue","mtime":1743693852771},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743694599572},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\babel-loader\\lib\\index.js","mtime":1743694587149},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743694599572},{"path":"D:\\bk\\aurora-blog-admin-qd\\node_modules\\vue-loader\\lib\\index.js","mtime":1743694587864}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnVGFnTGlzdCcsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGNyZWF0ZURpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgdGFnRm9ybTogew0KICAgICAgICB0YWc6ICcnDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgdGFnOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeagh+etvuWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgIHsgbWluOiAxLCBtYXg6IDMwLCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDEg5YiwIDMwIOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbJ3RhZ3MnLCAnaXNMb2FkaW5nJ10pDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5mZXRjaFRhZ3MoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbJ2ZldGNoVGFncycsICdjcmVhdGVUYWcnLCAnZGVsZXRlVGFnJ10pLA0KICAgIC8vIOaYvuekuuWIm+W7uuWvueivneahhg0KICAgIHNob3dDcmVhdGVEaWFsb2coKSB7DQogICAgICB0aGlzLnRhZ0Zvcm0udGFnID0gJycNCiAgICAgIHRoaXMuY3JlYXRlRGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmcy50YWdGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWIm+W7uuagh+etvg0KICAgIGNyZWF0ZVRhZygpIHsNCiAgICAgIHRoaXMuJHJlZnMudGFnRm9ybS52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlVGFnKHsgdGFnOiB0aGlzLnRhZ0Zvcm0udGFnIH0pDQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfmoIfnrb7liJvlu7rmiJDlip/vvIEnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLmNyZWF0ZURpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmoIfnrb7liJvlu7rlpLHotKUnKQ0KICAgICAgICAgICAgY29uc29sZS5lcnJvcign5qCH562+5Yib5bu65aSx6LSlOicsIGVycm9yKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOehruiupOWIoOmZpOagh+etvg0KICAgIGNvbmZpcm1EZWxldGUodGFnKSB7DQogICAgICBpZiAodGFnLmNvdW50ID4gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoYOivpeagh+etvui/mOWcqOS9v+eUqOS4re+8jOS4jeiDveWIoOmZpGApDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgDQogICAgICB0aGlzLiRjb25maXJtKGDnoa7lrpropoHliKDpmaTmoIfnrb4gIiR7dGFnLm5hbWV9IiDlkJfvvJ9gLCAn5Yig6Zmk56Gu6K6kJywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumuWIoOmZpCcsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZSh0YWcubmFtZSkNCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5omn6KGM5Yig6ZmkDQogICAgYXN5bmMgaGFuZGxlRGVsZXRlKHRhZ05hbWUpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlVGFnKHRhZ05hbWUpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICBtZXNzYWdlOiAn5qCH562+5Yig6Zmk5oiQ5Yqf77yBJw0KICAgICAgICB9KQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5qCH562+5Yig6Zmk5aSx6LSlJykNCiAgICAgICAgY29uc29sZS5lcnJvcign5qCH562+5Yig6Zmk5aSx6LSlOicsIGVycm9yKQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g562b6YCJ5L2/55So6K+l5qCH562+55qE5paH56ugDQogICAgZmlsdGVyUG9zdHNCeVRhZyh0YWdOYW1lKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICcvcG9zdHMnLA0KICAgICAgICBxdWVyeTogeyB0YWc6IHRhZ05hbWUgfQ0KICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["TagList.vue"],"names":[],"mappings":";AA8EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TagList.vue","sourceRoot":"src/views/tags","sourcesContent":["<template>\r\n  <div class=\"tag-list-container\">\r\n    <div class=\"page-header\">\r\n      <h2>标签管理</h2>\r\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"showCreateDialog\">\r\n        新建标签\r\n      </el-button>\r\n    </div>\r\n\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"hover\" class=\"tag-card\">\r\n          <el-table\r\n            :data=\"tags\"\r\n            style=\"width: 100%\"\r\n            v-loading=\"isLoading\"\r\n            border\r\n            stripe\r\n          >\r\n            <el-table-column prop=\"name\" label=\"标签名称\" width=\"180\">\r\n              <template slot-scope=\"scope\">\r\n                <el-tag>{{ scope.row.name }}</el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"count\" label=\"使用次数\" width=\"120\" sortable>\r\n              <template slot-scope=\"scope\">\r\n                <span>{{ scope.row.count || 0 }}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"150\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  icon=\"el-icon-delete\"\r\n                  @click=\"confirmDelete(scope.row)\"\r\n                  :disabled=\"scope.row.count > 0\"\r\n                  title=\"删除\"\r\n                ></el-button>\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"primary\"\r\n                  icon=\"el-icon-search\"\r\n                  @click=\"filterPostsByTag(scope.row.name)\"\r\n                  title=\"查看关联文章\"\r\n                ></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <!-- 空状态 -->\r\n          <div v-if=\"tags.length === 0 && !isLoading\" class=\"empty-state\">\r\n            <i class=\"el-icon-collection-tag\"></i>\r\n            <p>暂无标签</p>\r\n            <el-button type=\"primary\" @click=\"showCreateDialog\">\r\n              新建标签\r\n            </el-button>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 新建标签对话框 -->\r\n    <el-dialog title=\"新建标签\" :visible.sync=\"createDialogVisible\" width=\"30%\">\r\n      <el-form :model=\"tagForm\" :rules=\"rules\" ref=\"tagForm\" label-width=\"80px\">\r\n        <el-form-item label=\"标签名称\" prop=\"tag\">\r\n          <el-input v-model=\"tagForm.tag\" placeholder=\"请输入标签名称\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"createDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"createTag\" :loading=\"isLoading\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: 'TagList',\r\n  data() {\r\n    return {\r\n      createDialogVisible: false,\r\n      tagForm: {\r\n        tag: ''\r\n      },\r\n      rules: {\r\n        tag: [\r\n          { required: true, message: '请输入标签名称', trigger: 'blur' },\r\n          { min: 1, max: 30, message: '长度在 1 到 30 个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['tags', 'isLoading'])\r\n  },\r\n  created() {\r\n    this.fetchTags()\r\n  },\r\n  methods: {\r\n    ...mapActions(['fetchTags', 'createTag', 'deleteTag']),\r\n    // 显示创建对话框\r\n    showCreateDialog() {\r\n      this.tagForm.tag = ''\r\n      this.createDialogVisible = true\r\n      this.$nextTick(() => {\r\n        this.$refs.tagForm.clearValidate()\r\n      })\r\n    },\r\n    // 创建标签\r\n    createTag() {\r\n      this.$refs.tagForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            await this.createTag({ tag: this.tagForm.tag })\r\n            \r\n            this.$message({\r\n              type: 'success',\r\n              message: '标签创建成功！'\r\n            })\r\n            \r\n            this.createDialogVisible = false\r\n          } catch (error) {\r\n            this.$message.error('标签创建失败')\r\n            console.error('标签创建失败:', error)\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 确认删除标签\r\n    confirmDelete(tag) {\r\n      if (tag.count > 0) {\r\n        this.$message.warning(`该标签还在使用中，不能删除`)\r\n        return\r\n      }\r\n      \r\n      this.$confirm(`确定要删除标签 \"${tag.name}\" 吗？`, '删除确认', {\r\n        confirmButtonText: '确定删除',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.handleDelete(tag.name)\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        })\r\n      })\r\n    },\r\n    // 执行删除\r\n    async handleDelete(tagName) {\r\n      try {\r\n        await this.deleteTag(tagName)\r\n        this.$message({\r\n          type: 'success',\r\n          message: '标签删除成功！'\r\n        })\r\n      } catch (error) {\r\n        this.$message.error('标签删除失败')\r\n        console.error('标签删除失败:', error)\r\n      }\r\n    },\r\n    // 筛选使用该标签的文章\r\n    filterPostsByTag(tagName) {\r\n      this.$router.push({\r\n        path: '/posts',\r\n        query: { tag: tagName }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.tag-list-container {\r\n  padding-bottom: 20px;\r\n}\r\n\r\n.tag-card {\r\n  min-height: 300px;\r\n}\r\n\r\n.empty-state {\r\n  padding: 40px 0;\r\n  text-align: center;\r\n}\r\n\r\n.empty-state i {\r\n  font-size: 48px;\r\n  color: #909399;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.empty-state p {\r\n  color: #606266;\r\n  margin-bottom: 20px;\r\n}\r\n</style> "]}]}